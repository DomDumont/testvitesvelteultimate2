(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();const hr=!1;var Ke=Array.isArray,Ei=Array.prototype.indexOf,wn=Array.from,hn=Object.defineProperty,Ie=Object.getOwnPropertyDescriptor,vr=Object.getOwnPropertyDescriptors,Pi=Object.prototype,Mi=Array.prototype,xn=Object.getPrototypeOf,Gn=Object.isExtensible;function Ai(t){return t()}function vn(t){for(var e=0;e<t.length;e++)t[e]()}function Ii(){var t,e,n=new Promise((i,s)=>{t=i,e=s});return{promise:n,resolve:t,reject:e}}const Et=2,Sn=4,rn=8,ke=16,Vt=32,me=64,En=128,Nt=256,tn=512,ot=1024,Wt=2048,Gt=4096,Dt=8192,be=16384,Pn=32768,Mn=65536,Zn=1<<17,Ni=1<<18,Oe=1<<19,_r=1<<20,_n=1<<21,An=1<<22,ve=1<<23,re=Symbol("$state"),Ci=Symbol("legacy props"),Wi=Symbol(""),In=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ti(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function zi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Di(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ki(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Oi(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ri(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Hi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Li(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Fi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Yi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const an=1,sn=2,pr=4,Ui=8,ji=16,Xi=1,Bi=2,qi=4,Ki=8,Vi=16,Gi=1,Zi=2,ct=Symbol(),Ji="http://www.w3.org/1999/xhtml";function Qi(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function $i(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let ta=!1;function gr(t){return t===this.v}function ea(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function mr(t){return!ea(t,this.v)}let Re=!1,na=!1;function ra(){Re=!0}let tt=null;function Ce(t){tt=t}function He(t,e=!1,n){tt={p:tt,c:null,e:null,s:t,x:null,l:Re&&!e?{s:null,u:null,$:[]}:null}}function Le(t){var e=tt,n=e.e;if(n!==null){e.e=null;for(var i of n)Cr(i)}return tt=e.p,{}}function Ve(){return!Re||tt!==null&&tt.l===null}let Me=[];function ia(){var t=Me;Me=[],vn(t)}function Ge(t){if(Me.length===0){var e=Me;queueMicrotask(()=>{e===Me&&ia()})}Me.push(t)}const aa=new WeakMap;function br(t){var e=U;if(e===null)return Y.f|=ve,t;if((e.f&Pn)===0){if((e.f&En)===0)throw!e.parent&&t instanceof Error&&yr(t),t;e.b.error(t)}else We(t,e)}function We(t,e){for(;e!==null;){if((e.f&En)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&yr(t),t}function yr(t){const e=aa.get(t);e&&(hn(t,"message",{value:e.message}),hn(t,"stack",{value:e.stack}))}const fn=new Set;let ft=null,pn=new Set,Xe=[],Nn=null,gn=!1;class Bt{current=new Map;#t=new Map;#e=new Set;#l=0;#a=null;#f=!1;#s=[];#r=[];#n=[];#i=[];#o=[];#d=[];#c=[];skipped_effects=new Set;process(e){Xe=[];for(const s of e)this.#h(s);if(this.#s.length===0&&this.#l===0){this.#v();var n=this.#n,i=this.#i;this.#n=[],this.#i=[],this.#o=[],ft=null,Jn(n),Jn(i),ft===null?ft=this:fn.delete(this),this.#a?.resolve()}else this.#u(this.#n),this.#u(this.#i),this.#u(this.#o);for(const s of this.#s)pe(s);for(const s of this.#r)pe(s);this.#s=[],this.#r=[]}#h(e){e.f^=ot;for(var n=e.first;n!==null;){var i=n.f,s=(i&(Vt|me))!==0,l=s&&(i&ot)!==0,u=l||(i&Dt)!==0||this.skipped_effects.has(n);if(!u&&n.fn!==null){if(s)n.f^=ot;else if((i&Sn)!==0)this.#i.push(n);else if((i&ot)===0)if((i&An)!==0){var h=n.b?.is_pending()?this.#r:this.#s;h.push(n)}else Je(n)&&((n.f&ke)!==0&&this.#o.push(n),pe(n));var f=n.first;if(f!==null){n=f;continue}}var v=n.parent;for(n=n.next;n===null&&v!==null;)n=v.next,v=v.parent}}#u(e){for(const n of e)((n.f&Wt)!==0?this.#d:this.#c).push(n),gt(n,ot);e.length=0}capture(e,n){this.#t.has(e)||this.#t.set(e,n),this.current.set(e,e.v)}activate(){ft=this}deactivate(){ft=null;for(const e of pn)if(pn.delete(e),e(),ft!==null)break}neuter(){this.#f=!0}flush(){Xe.length>0?sa():this.#v(),ft===this&&(this.#l===0&&fn.delete(this),this.deactivate())}#v(){if(!this.#f)for(const e of this.#e)e();this.#e.clear()}increment(){this.#l+=1}decrement(){if(this.#l-=1,this.#l===0){for(const e of this.#d)gt(e,Wt),Te(e);for(const e of this.#c)gt(e,Gt),Te(e);this.#n=[],this.#i=[],this.flush()}else this.deactivate()}add_callback(e){this.#e.add(e)}settled(){return(this.#a??=Ii()).promise}static ensure(){if(ft===null){const e=ft=new Bt;fn.add(ft),Bt.enqueue(()=>{ft===e&&e.flush()})}return ft}static enqueue(e){Ge(e)}}function sa(){var t=Ne;gn=!0;try{var e=0;for(tr(!0);Xe.length>0;){var n=Bt.ensure();if(e++>1e3){var i,s;la()}n.process(Xe),ie.clear()}}finally{gn=!1,tr(t),Nn=null}}function la(){try{Ri()}catch(t){We(t,Nn)}}let he=null;function Jn(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var i=t[n++];if((i.f&(be|Dt))===0&&Je(i)&&(he=[],pe(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?Dr(i):i.fn=null),he?.length>0)){ie.clear();for(const s of he)pe(s);he=[]}}he=null}}function Te(t){for(var e=Nn=t;e.parent!==null;){e=e.parent;var n=e.f;if(gn&&e===U&&(n&ke)!==0)return;if((n&(me|Vt))!==0){if((n&ot)===0)return;e.f^=ot}}Xe.push(e)}function oa(t){let e=0,n=ge(0),i;return()=>{xa()&&(r(n),kn(()=>(e===0&&(i=X(()=>t(()=>Ue(n)))),e+=1,()=>{Ge(()=>{e-=1,e===0&&(i?.(),i=void 0,Ue(n))})})))}}var ua=Mn|Oe|En;function ca(t,e,n){new fa(t,e,n)}class fa{parent;#t=!1;#e;#l=null;#a;#f;#s;#r=null;#n=null;#i=null;#o=null;#d=0;#c=0;#h=!1;#u=null;#v=()=>{this.#u&&ze(this.#u,this.#d)};#m=oa(()=>(this.#u=ge(this.#d),()=>{this.#u=null}));constructor(e,n,i){this.#e=e,this.#a=n,this.#f=i,this.parent=U.b,this.#t=!!this.#a.pending,this.#s=Wr(()=>{U.b=this;{try{this.#r=Xt(()=>i(this.#e))}catch(s){this.error(s)}this.#c>0?this.#p():this.#t=!1}},ua)}#b(){try{this.#r=Xt(()=>this.#f(this.#e))}catch(e){this.error(e)}this.#t=!1}#y(){const e=this.#a.pending;e&&(this.#n=Xt(()=>e(this.#e)),Bt.enqueue(()=>{this.#r=this.#_(()=>(Bt.ensure(),Xt(()=>this.#f(this.#e)))),this.#c>0?this.#p():(je(this.#n,()=>{this.#n=null}),this.#t=!1)}))}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#a.pending}#_(e){var n=U,i=Y,s=tt;Lt(this.#s),wt(this.#s),Ce(this.#s.ctx);try{return e()}catch(l){return br(l),null}finally{Lt(n),wt(i),Ce(s)}}#p(){const e=this.#a.pending;this.#r!==null&&(this.#o=document.createDocumentFragment(),da(this.#r,this.#o)),this.#n===null&&(this.#n=Xt(()=>e(this.#e)))}#g(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(e);return}this.#c+=e,this.#c===0&&(this.#t=!1,this.#n&&je(this.#n,()=>{this.#n=null}),this.#o&&(this.#e.before(this.#o),this.#o=null))}update_pending_count(e){this.#g(e),this.#d+=e,pn.add(this.#v)}get_effect_pending(){return this.#m(),r(this.#u)}error(e){var n=this.#a.onerror;let i=this.#a.failed;if(this.#h||!n&&!i)throw e;this.#r&&(Ct(this.#r),this.#r=null),this.#n&&(Ct(this.#n),this.#n=null),this.#i&&(Ct(this.#i),this.#i=null);var s=!1,l=!1;const u=()=>{if(s){$i();return}s=!0,l&&Yi(),Bt.ensure(),this.#d=0,this.#i!==null&&je(this.#i,()=>{this.#i=null}),this.#t=this.has_pending_snippet(),this.#r=this.#_(()=>(this.#h=!1,Xt(()=>this.#f(this.#e)))),this.#c>0?this.#p():this.#t=!1};var h=Y;try{wt(null),l=!0,n?.(e,u),l=!1}catch(f){We(f,this.#s&&this.#s.parent)}finally{wt(h)}i&&Ge(()=>{this.#i=this.#_(()=>{this.#h=!0;try{return Xt(()=>{i(this.#e,()=>e,()=>u)})}catch(f){return We(f,this.#s.parent),null}finally{this.#h=!1}})})}}function da(t,e){for(var n=t.nodes_start,i=t.nodes_end;n!==null;){var s=n===i?null:Ze(n);e.append(n),n=s}}function ha(t,e,n){const i=Ve()?ln:Cn;if(e.length===0){n(t.map(i));return}var s=ft,l=U,u=va();Promise.all(e.map(h=>_a(h))).then(h=>{s?.activate(),u();try{n([...t.map(i),...h])}catch(f){(l.f&be)===0&&We(f,l)}s?.deactivate(),wr()}).catch(h=>{We(h,l)})}function va(){var t=U,e=Y,n=tt,i=ft;return function(){Lt(t),wt(e),Ce(n),i?.activate()}}function wr(){Lt(null),wt(null),Ce(null)}function ln(t){var e=Et|Wt,n=Y!==null&&(Y.f&Et)!==0?Y:null;return U===null||n!==null&&(n.f&Nt)!==0?e|=Nt:U.f|=Oe,{ctx:tt,deps:null,effects:null,equals:gr,f:e,fn:t,reactions:null,rv:0,v:ct,wv:0,parent:n??U,ac:null}}function _a(t,e){let n=U;n===null&&zi();var i=n.b,s=void 0,l=ge(ct),u=null,h=!Y;return Aa(()=>{try{var f=t();u&&Promise.resolve(f).catch(()=>{})}catch(S){f=Promise.reject(S)}var v=()=>f;s=u?.then(v,v)??Promise.resolve(f),u=s;var b=ft,y=i.is_pending();h&&(i.update_pending_count(1),y||b.increment());const w=(S,m=void 0)=>{u=null,y||b.activate(),m?m!==In&&(l.f|=ve,ze(l,m)):((l.f&ve)!==0&&(l.f^=ve),ze(l,S)),h&&(i.update_pending_count(-1),y||b.decrement()),wr()};if(s.then(w,S=>w(null,S||"unknown")),b)return()=>{queueMicrotask(()=>b.neuter())}}),new Promise(f=>{function v(b){function y(){b===s?f(l):v(s)}b.then(y,y)}v(s)})}function Cn(t){const e=ln(t);return e.equals=mr,e}function xr(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Ct(e[n])}}function pa(t){for(var e=t.parent;e!==null;){if((e.f&Et)===0)return e;e=e.parent}return null}function Wn(t){var e,n=U;Lt(pa(t));try{xr(t),e=Yr(t)}finally{Lt(n)}return e}function Sr(t){var e=Wn(t);if(t.equals(e)||(t.v=e,t.wv=Lr()),!ye){var n=(ne||(t.f&Nt)!==0)&&t.deps!==null?Gt:ot;gt(t,n)}}const ie=new Map;function ge(t,e){var n={f:0,v:t,reactions:null,equals:gr,rv:0,wv:0};return n}function te(t,e){const n=ge(t);return Ca(n),n}function K(t,e=!1,n=!0){const i=ge(t);return e||(i.equals=mr),Re&&n&&tt!==null&&tt.l!==null&&(tt.l.s??=[]).push(i),i}function p(t,e,n=!1){Y!==null&&(!zt||(Y.f&Zn)!==0)&&Ve()&&(Y.f&(Et|ke|An|Zn))!==0&&!Kt?.includes(t)&&Fi();let i=n?Ae(e):e;return ze(t,i)}function ze(t,e){if(!t.equals(e)){var n=t.v;ye?ie.set(t,e):ie.set(t,n),t.v=e;var i=Bt.ensure();i.capture(t,n),(t.f&Et)!==0&&((t.f&Wt)!==0&&Wn(t),gt(t,(t.f&Nt)===0?ot:Gt)),t.wv=Lr(),Er(t,Wt),Ve()&&U!==null&&(U.f&ot)!==0&&(U.f&(Vt|me))===0&&(At===null?Wa([t]):At.push(t))}return e}function Ue(t){p(t,t.v+1)}function Er(t,e){var n=t.reactions;if(n!==null)for(var i=Ve(),s=n.length,l=0;l<s;l++){var u=n[l],h=u.f;if(!(!i&&u===U)){var f=(h&Wt)===0;f&&gt(u,e),(h&Et)!==0?Er(u,Gt):f&&((h&ke)!==0&&he!==null&&he.push(u),Te(u))}}}function Ae(t){if(typeof t!="object"||t===null||re in t)return t;const e=xn(t);if(e!==Pi&&e!==Mi)return t;var n=new Map,i=Ke(t),s=te(0),l=_e,u=h=>{if(_e===l)return h();var f=Y,v=_e;wt(null),nr(l);var b=h();return wt(f),nr(v),b};return i&&n.set("length",te(t.length)),new Proxy(t,{defineProperty(h,f,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&Hi();var b=n.get(f);return b===void 0?b=u(()=>{var y=te(v.value);return n.set(f,y),y}):p(b,v.value,!0),!0},deleteProperty(h,f){var v=n.get(f);if(v===void 0){if(f in h){const b=u(()=>te(ct));n.set(f,b),Ue(s)}}else p(v,ct),Ue(s);return!0},get(h,f,v){if(f===re)return t;var b=n.get(f),y=f in h;if(b===void 0&&(!y||Ie(h,f)?.writable)&&(b=u(()=>{var S=Ae(y?h[f]:ct),m=te(S);return m}),n.set(f,b)),b!==void 0){var w=r(b);return w===ct?void 0:w}return Reflect.get(h,f,v)},getOwnPropertyDescriptor(h,f){var v=Reflect.getOwnPropertyDescriptor(h,f);if(v&&"value"in v){var b=n.get(f);b&&(v.value=r(b))}else if(v===void 0){var y=n.get(f),w=y?.v;if(y!==void 0&&w!==ct)return{enumerable:!0,configurable:!0,value:w,writable:!0}}return v},has(h,f){if(f===re)return!0;var v=n.get(f),b=v!==void 0&&v.v!==ct||Reflect.has(h,f);if(v!==void 0||U!==null&&(!b||Ie(h,f)?.writable)){v===void 0&&(v=u(()=>{var w=b?Ae(h[f]):ct,S=te(w);return S}),n.set(f,v));var y=r(v);if(y===ct)return!1}return b},set(h,f,v,b){var y=n.get(f),w=f in h;if(i&&f==="length")for(var S=v;S<y.v;S+=1){var m=n.get(S+"");m!==void 0?p(m,ct):S in h&&(m=u(()=>te(ct)),n.set(S+"",m))}if(y===void 0)(!w||Ie(h,f)?.writable)&&(y=u(()=>te(void 0)),p(y,Ae(v)),n.set(f,y));else{w=y.v!==ct;var N=u(()=>Ae(v));p(y,N)}var P=Reflect.getOwnPropertyDescriptor(h,f);if(P?.set&&P.set.call(b,v),!w){if(i&&typeof f=="string"){var R=n.get("length"),H=Number(f);Number.isInteger(H)&&H>=R.v&&p(R,H+1)}Ue(s)}return!0},ownKeys(h){r(s);var f=Reflect.ownKeys(h).filter(y=>{var w=n.get(y);return w===void 0||w.v!==ct});for(var[v,b]of n)b.v!==ct&&!(v in h)&&f.push(v);return f},setPrototypeOf(){Li()}})}function Qn(t){try{if(t!==null&&typeof t=="object"&&re in t)return t[re]}catch{}return t}function ga(t,e){return Object.is(Qn(t),Qn(e))}var $n,Pr,Mr,Ar;function ma(){if($n===void 0){$n=window,Pr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Mr=Ie(e,"firstChild").get,Ar=Ie(e,"nextSibling").get,Gn(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Gn(n)&&(n.__t=void 0)}}function Tn(t=""){return document.createTextNode(t)}function en(t){return Mr.call(t)}function Ze(t){return Ar.call(t)}function T(t,e){return en(t)}function zn(t,e=!1){{var n=en(t);return n instanceof Comment&&n.data===""?Ze(n):n}}function z(t,e=1,n=!1){let i=t;for(;e--;)i=Ze(i);return i}function ba(t){t.textContent=""}function ya(){return!1}function Dn(t){var e=Y,n=U;wt(null),Lt(null);try{return t()}finally{wt(e),Lt(n)}}function Ir(t){U===null&&Y===null&&Oi(),Y!==null&&(Y.f&Nt)!==0&&U===null&&ki(),ye&&Di()}function wa(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Ft(t,e,n,i=!0){var s=U;s!==null&&(s.f&Dt)!==0&&(t|=Dt);var l={ctx:tt,deps:null,nodes_start:null,nodes_end:null,f:t|Wt,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{pe(l),l.f|=Pn}catch(f){throw Ct(l),f}else e!==null&&Te(l);if(i){var u=l;if(n&&u.deps===null&&u.teardown===null&&u.nodes_start===null&&u.first===u.last&&(u.f&Oe)===0&&(u=u.first),u!==null&&(u.parent=s,s!==null&&wa(u,s),Y!==null&&(Y.f&Et)!==0&&(t&me)===0)){var h=Y;(h.effects??=[]).push(u)}}return l}function xa(){return Y!==null&&!zt}function Nr(t){const e=Ft(rn,null,!1);return gt(e,ot),e.teardown=t,e}function mn(t){Ir();var e=U.f,n=!Y&&(e&Vt)!==0&&(e&Pn)===0;if(n){var i=tt;(i.e??=[]).push(t)}else return Cr(t)}function Cr(t){return Ft(Sn|_r,t,!1)}function Sa(t){return Ir(),Ft(rn|_r,t,!0)}function Ea(t){Bt.ensure();const e=Ft(me|Oe,t,!0);return(n={})=>new Promise(i=>{n.outro?je(e,()=>{Ct(e),i(void 0)}):(Ct(e),i(void 0))})}function Pa(t){return Ft(Sn,t,!1)}function at(t,e){var n=tt,i={effect:null,ran:!1,deps:t};n.l.$.push(i),i.effect=kn(()=>{t(),!i.ran&&(i.ran=!0,X(e))})}function Ma(){var t=tt;kn(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&ot)!==0&&gt(n,Gt),Je(n)&&pe(n),e.ran=!1}})}function Aa(t){return Ft(An|Oe,t,!0)}function kn(t,e=0){return Ft(rn|e,t,!0)}function qt(t,e=[],n=[]){ha(e,n,i=>{Ft(rn,()=>t(...i.map(r)),!0)})}function Wr(t,e=0){var n=Ft(ke|e,t,!0);return n}function Xt(t,e=!0){return Ft(Vt|Oe,t,!0,e)}function Tr(t){var e=t.teardown;if(e!==null){const n=ye,i=Y;er(!0),wt(null);try{e.call(null)}finally{er(n),wt(i)}}}function zr(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const s=n.ac;s!==null&&Dn(()=>{s.abort(In)});var i=n.next;(n.f&me)!==0?n.parent=null:Ct(n,e),n=i}}function Ia(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Vt)===0&&Ct(e),e=n}}function Ct(t,e=!0){var n=!1;(e||(t.f&Ni)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Na(t.nodes_start,t.nodes_end),n=!0),zr(t,e&&!n),nn(t,0),gt(t,be);var i=t.transitions;if(i!==null)for(const l of i)l.stop();Tr(t);var s=t.parent;s!==null&&s.first!==null&&Dr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Na(t,e){for(;t!==null;){var n=t===e?null:Ze(t);t.remove(),t=n}}function Dr(t){var e=t.parent,n=t.prev,i=t.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=n))}function je(t,e){var n=[];On(t,n,!0),kr(n,()=>{Ct(t),e&&e()})}function kr(t,e){var n=t.length;if(n>0){var i=()=>--n||e();for(var s of t)s.out(i)}else e()}function On(t,e,n){if((t.f&Dt)===0){if(t.f^=Dt,t.transitions!==null)for(const u of t.transitions)(u.is_global||n)&&e.push(u);for(var i=t.first;i!==null;){var s=i.next,l=(i.f&Mn)!==0||(i.f&Vt)!==0;On(i,e,l?n:!1),i=s}}}function Or(t){Rr(t,!0)}function Rr(t,e){if((t.f&Dt)!==0){t.f^=Dt,(t.f&ot)===0&&(gt(t,Wt),Te(t));for(var n=t.first;n!==null;){var i=n.next,s=(n.f&Mn)!==0||(n.f&Vt)!==0;Rr(n,s?e:!1),n=i}if(t.transitions!==null)for(const l of t.transitions)(l.is_global||e)&&l.in()}}let Ne=!1;function tr(t){Ne=t}let ye=!1;function er(t){ye=t}let Y=null,zt=!1;function wt(t){Y=t}let U=null;function Lt(t){U=t}let Kt=null;function Ca(t){Y!==null&&(Kt===null?Kt=[t]:Kt.push(t))}let pt=null,St=0,At=null;function Wa(t){At=t}let Hr=1,Be=0,_e=Be;function nr(t){_e=t}let ne=!1;function Lr(){return++Hr}function Je(t){var e=t.f;if((e&Wt)!==0)return!0;if((e&Gt)!==0){var n=t.deps,i=(e&Nt)!==0;if(n!==null){var s,l,u=(e&tn)!==0,h=i&&U!==null&&!ne,f=n.length;if((u||h)&&(U===null||(U.f&be)===0)){var v=t,b=v.parent;for(s=0;s<f;s++)l=n[s],(u||!l?.reactions?.includes(v))&&(l.reactions??=[]).push(v);u&&(v.f^=tn),h&&b!==null&&(b.f&Nt)===0&&(v.f^=Nt)}for(s=0;s<f;s++)if(l=n[s],Je(l)&&Sr(l),l.wv>t.wv)return!0}(!i||U!==null&&!ne)&&gt(t,ot)}return!1}function Fr(t,e,n=!0){var i=t.reactions;if(i!==null&&!Kt?.includes(t))for(var s=0;s<i.length;s++){var l=i[s];(l.f&Et)!==0?Fr(l,e,!1):e===l&&(n?gt(l,Wt):(l.f&ot)!==0&&gt(l,Gt),Te(l))}}function Yr(t){var e=pt,n=St,i=At,s=Y,l=ne,u=Kt,h=tt,f=zt,v=_e,b=t.f;pt=null,St=0,At=null,ne=(b&Nt)!==0&&(zt||!Ne||Y===null),Y=(b&(Vt|me))===0?t:null,Kt=null,Ce(t.ctx),zt=!1,_e=++Be,t.ac!==null&&(Dn(()=>{t.ac.abort(In)}),t.ac=null);try{t.f|=_n;var y=t.fn,w=y(),S=t.deps;if(pt!==null){var m;if(nn(t,St),S!==null&&St>0)for(S.length=St+pt.length,m=0;m<pt.length;m++)S[St+m]=pt[m];else t.deps=S=pt;if(!ne||(b&Et)!==0&&t.reactions!==null)for(m=St;m<S.length;m++)(S[m].reactions??=[]).push(t)}else S!==null&&St<S.length&&(nn(t,St),S.length=St);if(Ve()&&At!==null&&!zt&&S!==null&&(t.f&(Et|Gt|Wt))===0)for(m=0;m<At.length;m++)Fr(At[m],t);return s!==null&&s!==t&&(Be++,At!==null&&(i===null?i=At:i.push(...At))),(t.f&ve)!==0&&(t.f^=ve),w}catch(N){return br(N)}finally{t.f^=_n,pt=e,St=n,At=i,Y=s,ne=l,Kt=u,Ce(h),zt=f,_e=v}}function Ta(t,e){let n=e.reactions;if(n!==null){var i=Ei.call(n,t);if(i!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[i]=n[s],n.pop())}}n===null&&(e.f&Et)!==0&&(pt===null||!pt.includes(e))&&(gt(e,Gt),(e.f&(Nt|tn))===0&&(e.f^=tn),xr(e),nn(e,0))}function nn(t,e){var n=t.deps;if(n!==null)for(var i=e;i<n.length;i++)Ta(t,n[i])}function pe(t){var e=t.f;if((e&be)===0){gt(t,ot);var n=U,i=Ne;U=t,Ne=!0;try{(e&ke)!==0?Ia(t):zr(t),Tr(t);var s=Yr(t);t.teardown=typeof s=="function"?s:null,t.wv=Hr;var l;hr&&na&&(t.f&Wt)!==0&&t.deps}finally{Ne=i,U=n}}}function r(t){var e=t.f,n=(e&Et)!==0;if(Y!==null&&!zt){var i=U!==null&&(U.f&be)!==0;if(!i&&!Kt?.includes(t)){var s=Y.deps;if((Y.f&_n)!==0)t.rv<Be&&(t.rv=Be,pt===null&&s!==null&&s[St]===t?St++:pt===null?pt=[t]:(!ne||!pt.includes(t))&&pt.push(t));else{(Y.deps??=[]).push(t);var l=t.reactions;l===null?t.reactions=[Y]:l.includes(Y)||l.push(Y)}}}else if(n&&t.deps===null&&t.effects===null){var u=t,h=u.parent;h!==null&&(h.f&Nt)===0&&(u.f^=Nt)}if(ye){if(ie.has(t))return ie.get(t);if(n){u=t;var f=u.v;return((u.f&ot)===0&&u.reactions!==null||Ur(u))&&(f=Wn(u)),ie.set(u,f),f}}else n&&(u=t,Je(u)&&Sr(u));if((t.f&ve)!==0)throw t.v;return t.v}function Ur(t){if(t.v===ct)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(ie.has(e)||(e.f&Et)!==0&&Ur(e))return!0;return!1}function X(t){var e=zt;try{return zt=!0,t()}finally{zt=e}}const za=-7169;function gt(t,e){t.f=t.f&za|e}function yt(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(re in t)bn(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&re in n&&bn(n)}}}function bn(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{bn(t[i],e)}catch{}const n=xn(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=vr(n);for(let s in i){const l=i[s].get;if(l)try{l.call(t)}catch{}}}}}const Da=["touchstart","touchmove"];function ka(t){return Da.includes(t)}const Oa=new Set,rr=new Set;function Ra(t,e,n,i={}){function s(l){if(i.capture||Fe.call(e,l),!l.cancelBubble)return Dn(()=>n?.call(this,l))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Ge(()=>{e.addEventListener(t,s,i)}):e.addEventListener(t,s,i),s}function O(t,e,n,i,s){var l={capture:i,passive:s},u=Ra(t,e,n,l);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Nr(()=>{e.removeEventListener(t,u,l)})}let ir=null;function Fe(t){var e=this,n=e.ownerDocument,i=t.type,s=t.composedPath?.()||[],l=s[0]||t.target;ir=t;var u=0,h=ir===t&&t.__root;if(h){var f=s.indexOf(h);if(f!==-1&&(e===document||e===window)){t.__root=e;return}var v=s.indexOf(e);if(v===-1)return;f<=v&&(u=f)}if(l=s[u]||t.target,l!==e){hn(t,"currentTarget",{configurable:!0,get(){return l||n}});var b=Y,y=U;wt(null),Lt(null);try{for(var w,S=[];l!==null;){var m=l.assignedSlot||l.parentNode||l.host||null;try{var N=l["__"+i];if(N!=null&&(!l.disabled||t.target===l))if(Ke(N)){var[P,...R]=N;P.apply(l,[t,...R])}else N.call(l,t)}catch(H){w?S.push(H):w=H}if(t.cancelBubble||m===e||m===null)break;l=m}if(w){for(let H of S)queueMicrotask(()=>{throw H});throw w}}finally{t.__root=e,delete t.currentTarget,wt(b),Lt(y)}}}function Ha(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ar(t,e){var n=U;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function Yt(t,e){var n=(e&Gi)!==0,i=(e&Zi)!==0,s,l=!t.startsWith("<!>");return()=>{s===void 0&&(s=Ha(l?t:"<!>"+t),n||(s=en(s)));var u=i||Pr?document.importNode(s,!0):s.cloneNode(!0);if(n){var h=en(u),f=u.lastChild;ar(h,f)}else ar(u,u);return u}}function Ht(t,e){t!==null&&t.before(e)}function It(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function La(t,e){return Fa(t,e)}const Se=new Map;function Fa(t,{target:e,anchor:n,props:i={},events:s,context:l,intro:u=!0}){ma();var h=new Set,f=y=>{for(var w=0;w<y.length;w++){var S=y[w];if(!h.has(S)){h.add(S);var m=ka(S);e.addEventListener(S,Fe,{passive:m});var N=Se.get(S);N===void 0?(document.addEventListener(S,Fe,{passive:m}),Se.set(S,1)):Se.set(S,N+1)}}};f(wn(Oa)),rr.add(f);var v=void 0,b=Ea(()=>{var y=n??e.appendChild(Tn());return ca(y,{pending:()=>{}},w=>{if(l){He({});var S=tt;S.c=l}s&&(i.$$events=s),v=t(w,i)||{},l&&Le()}),()=>{for(var w of h){e.removeEventListener(w,Fe);var S=Se.get(w);--S===0?(document.removeEventListener(w,Fe),Se.delete(w)):Se.set(w,S)}rr.delete(f),y!==n&&y.parentNode?.removeChild(y)}});return Ya.set(v,b),v}let Ya=new WeakMap;function sr(t,e){return e}function Ua(t,e,n){for(var i=t.items,s=[],l=e.length,u=0;u<l;u++)On(e[u].e,s,!0);var h=l>0&&s.length===0&&n!==null;if(h){var f=n.parentNode;ba(f),f.append(n),i.clear(),Rt(t,e[0].prev,e[l-1].next)}kr(s,()=>{for(var v=0;v<l;v++){var b=e[v];h||(i.delete(b.k),Rt(t,b.prev,b.next)),Ct(b.e,!h)}})}function qe(t,e,n,i,s,l=null){var u=t,h={flags:e,items:new Map,first:null},f=(e&pr)!==0;if(f){var v=t;u=v.appendChild(Tn())}var b=null,y=!1,w=new Map,S=Cn(()=>{var R=n();return Ke(R)?R:R==null?[]:wn(R)}),m,N;function P(){ja(N,m,h,w,u,s,e,i,n),l!==null&&(m.length===0?b?Or(b):b=Xt(()=>l(u)):b!==null&&je(b,()=>{b=null}))}Wr(()=>{N??=U,m=r(S);var R=m.length;if(!(y&&R===0)){y=R===0;var H,E,G,B;if(ya()){var k=new Set,W=ft;for(E=0;E<R;E+=1){G=m[E],B=i(G,E);var j=h.items.get(B)??w.get(B);j?(e&(an|sn))!==0&&jr(j,G,E,e):(H=Xr(null,h,null,null,G,B,E,s,e,n,!0),w.set(B,H)),k.add(B)}for(const[q,ut]of h.items)k.has(q)||W.skipped_effects.add(ut.e);W.add_callback(P)}else P();r(S)}})}function ja(t,e,n,i,s,l,u,h,f){var v=(u&Ui)!==0,b=(u&(an|sn))!==0,y=e.length,w=n.items,S=n.first,m=S,N,P=null,R,H=[],E=[],G,B,k,W;if(v)for(W=0;W<y;W+=1)G=e[W],B=h(G,W),k=w.get(B),k!==void 0&&(k.a?.measure(),(R??=new Set).add(k));for(W=0;W<y;W+=1){if(G=e[W],B=h(G,W),k=w.get(B),k===void 0){var j=i.get(B);if(j!==void 0){i.delete(B),w.set(B,j);var q=P?P.next:m;Rt(n,P,j),Rt(n,j,q),dn(j,q,s),P=j}else{var ut=m?m.e.nodes_start:s;P=Xr(ut,n,P,P===null?n.first:P.next,G,B,W,l,u,f)}w.set(B,P),H=[],E=[],m=P.next;continue}if(b&&jr(k,G,W,u),(k.e.f&Dt)!==0&&(Or(k.e),v&&(k.a?.unfix(),(R??=new Set).delete(k))),k!==m){if(N!==void 0&&N.has(k)){if(H.length<E.length){var Q=E[0],et;P=Q.prev;var st=H[0],V=H[H.length-1];for(et=0;et<H.length;et+=1)dn(H[et],Q,s);for(et=0;et<E.length;et+=1)N.delete(E[et]);Rt(n,st.prev,V.next),Rt(n,P,st),Rt(n,V,Q),m=Q,P=V,W-=1,H=[],E=[]}else N.delete(k),dn(k,m,s),Rt(n,k.prev,k.next),Rt(n,k,P===null?n.first:P.next),Rt(n,P,k),P=k;continue}for(H=[],E=[];m!==null&&m.k!==B;)(m.e.f&Dt)===0&&(N??=new Set).add(m),E.push(m),m=m.next;if(m===null)continue;k=m}H.push(k),P=k,m=k.next}if(m!==null||N!==void 0){for(var x=N===void 0?[]:wn(N);m!==null;)(m.e.f&Dt)===0&&x.push(m),m=m.next;var A=x.length;if(A>0){var D=(u&pr)!==0&&y===0?s:null;if(v){for(W=0;W<A;W+=1)x[W].a?.measure();for(W=0;W<A;W+=1)x[W].a?.fix()}Ua(n,x,D)}}v&&Ge(()=>{if(R!==void 0)for(k of R)k.a?.apply()}),t.first=n.first&&n.first.e,t.last=P&&P.e;for(var L of i.values())Ct(L.e);i.clear()}function jr(t,e,n,i){(i&an)!==0&&ze(t.v,e),(i&sn)!==0?ze(t.i,n):t.i=n}function Xr(t,e,n,i,s,l,u,h,f,v,b){var y=(f&an)!==0,w=(f&ji)===0,S=y?w?K(s,!1,!1):ge(s):s,m=(f&sn)===0?u:ge(u),N={i:m,v:S,k:l,a:null,e:null,prev:n,next:i};try{if(t===null){var P=document.createDocumentFragment();P.append(t=Tn())}return N.e=Xt(()=>h(t,S,m,v),ta),N.e.prev=n&&n.e,N.e.next=i&&i.e,n===null?b||(e.first=N):(n.next=N,n.e.next=N.e),i!==null&&(i.prev=N,i.e.prev=N.e),N}finally{}}function dn(t,e,n){for(var i=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,l=t.e.nodes_start;l!==null&&l!==i;){var u=Ze(l);s.before(l),l=u}}function Rt(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}const lr=[...` 	
\r\f \v\uFEFF`];function Xa(t,e,n){var i=t==null?"":""+t;if(e&&(i=i?i+" "+e:e),n){for(var s in n)if(n[s])i=i?i+" "+s:s;else if(i.length)for(var l=s.length,u=0;(u=i.indexOf(s,u))>=0;){var h=u+l;(u===0||lr.includes(i[u-1]))&&(h===i.length||lr.includes(i[h]))?i=(u===0?"":i.substring(0,u))+i.substring(h+1):u=h}}return i===""?null:i}function Ba(t,e){return t==null?null:String(t)}function Ye(t,e,n,i,s,l){var u=t.__className;if(u!==n||u===void 0){var h=Xa(n,i,l);h==null?t.removeAttribute("class"):t.className=h,t.__className=n}else if(l&&s!==l)for(var f in l){var v=!!l[f];(s==null||v!==!!s[f])&&t.classList.toggle(f,v)}return l}function de(t,e,n,i){var s=t.__style;if(s!==e){var l=Ba(e);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}return i}function yn(t,e,n=!1){if(t.multiple){if(e==null)return;if(!Ke(e))return Qi();for(var i of t.options)i.selected=e.includes(ur(i));return}for(i of t.options){var s=ur(i);if(ga(s,e)){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function or(t){var e=new MutationObserver(()=>{yn(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Nr(()=>{e.disconnect()})}function ur(t){return"__value"in t?t.__value:t.value}const qa=Symbol("is custom element"),Ka=Symbol("is html");function ee(t,e){var n=Rn(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Va(t,e){var n=Rn(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function cr(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function De(t,e,n,i){var s=Rn(t);s[e]!==(s[e]=n)&&(e==="loading"&&(t[Wi]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Ga(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Rn(t){return t.__attributes??={[qa]:t.nodeName.includes("-"),[Ka]:t.namespaceURI===Ji}}var fr=new Map;function Ga(t){var e=t.getAttribute("is")||t.nodeName,n=fr.get(e);if(n)return n;fr.set(e,n=[]);for(var i,s=t,l=Element.prototype;l!==s;){i=vr(s);for(var u in i)i[u].set&&n.push(u);s=xn(s)}return n}class Hn{#t=new WeakMap;#e;#l;static entries=new WeakMap;constructor(e){this.#l=e}observe(e,n){var i=this.#t.get(e)||new Set;return i.add(n),this.#t.set(e,i),this.#a().observe(e,this.#l),()=>{var s=this.#t.get(e);s.delete(n),s.size===0&&(this.#t.delete(e),this.#e.unobserve(e))}}#a(){return this.#e??(this.#e=new ResizeObserver(e=>{for(var n of e){Hn.entries.set(n.target,n);for(var i of this.#t.get(n.target)||[])i(n)}}))}}var Za=new Hn({box:"border-box"});function Ja(t,e,n){var i=Za.observe(t,()=>n(t[e]));Pa(()=>(X(()=>n(t[e])),i))}function Ee(t){return function(...e){var n=e[0];return n.stopPropagation(),t?.apply(this,e)}}function Qe(t=!1){const e=tt,n=e.l.u;if(!n)return;let i=()=>yt(e.s);if(t){let s=0,l={};const u=ln(()=>{let h=!1;const f=e.s;for(const v in f)f[v]!==l[v]&&(l[v]=f[v],h=!0);return h&&s++,s});i=()=>r(u)}n.b.length&&Sa(()=>{dr(e,i),vn(n.b)}),mn(()=>{const s=X(()=>n.m.map(Ai));return()=>{for(const l of s)typeof l=="function"&&l()}}),n.a.length&&mn(()=>{dr(e,i),vn(n.a)})}function dr(t,e){if(t.l.s)for(const n of t.l.s)r(n);e()}function Pe(t,e){var n=t.$$events?.[e.type],i=Ke(n)?n.slice():n==null?[]:[n];for(var s of i)s.call(this,e)}let $e=!1;function Qa(t){var e=$e;try{return $e=!1,[t(),$e]}finally{$e=e}}function I(t,e,n,i){var s=!Re||(n&Bi)!==0,l=(n&Ki)!==0,u=(n&Vi)!==0,h=i,f=!0,v=()=>(f&&(f=!1,h=u?X(i):i),h),b;if(l){var y=re in t||Ci in t;b=Ie(t,e)?.set??(y&&e in t?E=>t[e]=E:void 0)}var w,S=!1;l?[w,S]=Qa(()=>t[e]):w=t[e];var m;if(s?m=()=>{var E=t[e];return E===void 0?v():(f=!0,E)}:m=()=>{var E=t[e];return E!==void 0&&(h=void 0),E===void 0?h:E},s&&(n&qi)===0)return m;if(b){var N=t.$$legacy;return(function(E,G){return arguments.length>0?((!s||!G||N||S)&&b(G?m():E),E):m()})}var P=!1,R=((n&Xi)!==0?ln:Cn)(()=>(P=!1,m()));l&&r(R);var H=U;return(function(E,G){if(arguments.length>0){const B=G?r(R):s&&l?Ae(E):E;return p(R,B),P=!0,h!==void 0&&(h=B),E}return ye&&P||(H.f&be)!==0?R.v:r(R)})}function $a(t){tt===null&&Ti(),Re&&tt.l!==null?ts(tt).m.push(t):mn(()=>{const e=X(t);if(typeof e=="function")return e})}function ts(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const es="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(es);ra();var ns=Yt("<option> </option>"),rs=Yt("<option> </option>"),is=Yt('<header class="svelte-v9x55i"><div class="header-row svelte-v9x55i"><h1 class="svelte-v9x55i">Mat Designer</h1> <div class="history-actions svelte-v9x55i"><button type="button" class="secondary" title="Undo (Ctrl/Cmd+Z)">Undo</button> <button type="button" class="secondary" title="Redo (Ctrl/Cmd+Y or Shift+Ctrl/Cmd+Z)">Redo</button> <button type="button" class="secondary print-action" title="Print or Save as PDF">Print / PDF</button></div></div> <div class="mat-controls svelte-v9x55i"><label class="svelte-v9x55i"> <input type="number"/></label> <label class="svelte-v9x55i"> <input type="number"/></label> <label class="svelte-v9x55i">Units <select></select></label> <span class="scale svelte-v9x55i"> </span></div> <div class="preset-controls svelte-v9x55i"><label class="preset-row svelte-v9x55i">Presets <div class="preset-actions svelte-v9x55i"><select class="svelte-v9x55i"><option>Select preset…</option><!></select> <button type="button" class="secondary svelte-v9x55i">Load</button> <button type="button" class="secondary svelte-v9x55i">Delete</button></div></label> <label class="preset-row svelte-v9x55i">Save preset <div class="preset-actions svelte-v9x55i"><input type="text" placeholder="Preset name" class="svelte-v9x55i"/> <button type="button" class="svelte-v9x55i">Save</button></div></label></div></header>');function as(t,e){He(e,!1);let n=I(e,"matWidth",8),i=I(e,"matHeight",8),s=I(e,"unit",8),l=I(e,"unitOptions",8),u=I(e,"previewScale",8),h=I(e,"minSize",8),f=I(e,"canUndo",8),v=I(e,"canRedo",8),b=I(e,"onMatWidthChange",8),y=I(e,"onMatHeightChange",8),w=I(e,"onUnitChange",8),S=I(e,"onUndo",8),m=I(e,"onRedo",8),N=I(e,"onPrint",8),P=I(e,"presets",8),R=I(e,"selectedPresetId",8),H=I(e,"newPresetName",8),E=I(e,"canLoadPreset",8),G=I(e,"canDeletePreset",8),B=I(e,"canSavePreset",8),k=I(e,"onPresetSelect",8),W=I(e,"onPresetLoad",8),j=I(e,"onPresetDelete",8),q=I(e,"onPresetNameInput",8),ut=I(e,"onPresetSave",8);Qe();var Q=is(),et=T(Q),st=z(T(et),2),V=T(st),x=z(V,2),A=z(x,2),D=z(et,2),L=T(D),J=T(L),nt=z(J),it=z(L,2),$=T(it),mt=z($),lt=z(it,2),xt=z(T(lt));qe(xt,5,l,sr,(Z,vt)=>{var rt=ns(),ue=T(rt),bt={};qt(()=>{cr(rt,r(vt)===s()),It(ue,r(vt)),bt!==(bt=r(vt))&&(rt.value=(rt.__value=r(vt))??"")}),Ht(Z,rt)});var ae;or(xt);var Zt=z(lt,2),Ut=T(Zt),dt=z(D,2),se=T(dt),Pt=z(T(se)),ht=T(Pt),jt=T(ht);jt.value=jt.__value="";var le=z(jt);qe(le,1,P,sr,(Z,vt)=>{var rt=rs(),ue=T(rt),bt={};qt(()=>{cr(rt,(r(vt),yt(R()),X(()=>r(vt).id===R()))),It(ue,(r(vt),X(()=>r(vt).name))),bt!==(bt=(r(vt),X(()=>r(vt).id)))&&(rt.value=(rt.__value=(r(vt),X(()=>r(vt).id)))??"")}),Ht(Z,rt)});var Mt;or(ht);var Jt=z(ht,2),oe=z(Jt,2),kt=z(se,2),Qt=z(T(kt)),we=T(Qt),$t=z(we,2);qt(Z=>{V.disabled=!f(),x.disabled=!v(),It(J,`Mat Width (${s()??""}) `),De(nt,"min",h()),ee(nt,n()),It($,`Mat Height (${s()??""}) `),De(mt,"min",h()),ee(mt,i()),ae!==(ae=s())&&(xt.value=(xt.__value=s())??"",yn(xt,s())),It(Ut,`Preview scale: ${Z??""}%`),Mt!==(Mt=R()??"")&&(ht.value=(ht.__value=R()??"")??"",yn(ht,R()??"")),Jt.disabled=!E(),oe.disabled=!G(),ee(we,H()),$t.disabled=!B()},[()=>(yt(u()),X(()=>(u()*100).toFixed(0)))]),O("click",V,function(...Z){S()?.apply(this,Z)}),O("click",x,function(...Z){m()?.apply(this,Z)}),O("click",A,function(...Z){N()?.apply(this,Z)}),O("change",nt,function(...Z){b()?.apply(this,Z)}),O("change",mt,function(...Z){y()?.apply(this,Z)}),O("change",xt,function(...Z){w()?.apply(this,Z)}),O("change",ht,function(...Z){k()?.apply(this,Z)}),O("click",Jt,function(...Z){W()?.apply(this,Z)}),O("click",oe,function(...Z){j()?.apply(this,Z)}),O("input",we,function(...Z){q()?.apply(this,Z)}),O("click",$t,function(...Z){ut()?.apply(this,Z)}),Ht(t,Q),Le()}var ss=Yt('<tr><td data-label="Select" class="svelte-711wf0"><input type="checkbox" class="svelte-711wf0"/></td><td data-label="Name" class="svelte-711wf0"><input type="text" class="svelte-711wf0"/></td><td data-label="X" class="svelte-711wf0"><input type="number" min="0" class="svelte-711wf0"/></td><td data-label="Y" class="svelte-711wf0"><input type="number" min="0" class="svelte-711wf0"/></td><td data-label="Width" class="svelte-711wf0"><input type="number" class="svelte-711wf0"/></td><td data-label="Height" class="svelte-711wf0"><input type="number" class="svelte-711wf0"/></td></tr>'),ls=Yt('<h2 class="svelte-711wf0">Windows</h2> <div class="actions svelte-711wf0"><button type="button" class="svelte-711wf0">Add Window</button> <button type="button" class="svelte-711wf0">Remove Selected</button></div> <div class="table-wrapper svelte-711wf0"><table class="svelte-711wf0"><thead class="svelte-711wf0"><tr class="svelte-711wf0"><th class="svelte-711wf0"></th><th class="svelte-711wf0">Name</th><th class="svelte-711wf0">X</th><th class="svelte-711wf0">Y</th><th class="svelte-711wf0">Width</th><th class="svelte-711wf0">Height</th></tr></thead><tbody class="svelte-711wf0"></tbody></table></div>',1);function os(t,e){He(e,!1);let n=I(e,"windows",8),i=I(e,"selectedIdSet",8),s=I(e,"selectedCount",8),l=I(e,"minSize",8),u=I(e,"addWindow",8),h=I(e,"removeSelected",8),f=I(e,"toggleSelection",8),v=I(e,"updateWindow",8),b=I(e,"altKey",8);Qe();var y=ls(),w=z(zn(y),2),S=T(w),m=z(S,2),N=z(w,2),P=T(N),R=z(T(P));qe(R,5,n,H=>H.id,(H,E)=>{var G=ss();let B;var k=T(G),W=T(k),j=z(k),q=T(j),ut=z(j),Q=T(ut),et=z(ut),st=T(et),V=z(et),x=T(V),A=z(V),D=T(A);qt((L,J)=>{B=Ye(G,1,"svelte-711wf0",null,B,L),Va(W,J),ee(q,(r(E),X(()=>r(E).name))),ee(Q,(r(E),X(()=>r(E).x))),ee(st,(r(E),X(()=>r(E).y))),ee(x,(r(E),X(()=>r(E).width))),De(x,"min",l()),ee(D,(r(E),X(()=>r(E).height))),De(D,"min",l())},[()=>({selected:i().has(r(E).id)}),()=>(yt(i()),r(E),X(()=>i().has(r(E).id)))]),O("click",W,Ee(function(L){Pe.call(this,e,L)})),O("change",W,()=>f()(r(E).id,!0)),O("click",q,Ee(function(L){Pe.call(this,e,L)})),O("change",q,L=>v()(r(E).id,"name",L.currentTarget.value)),O("click",Q,Ee(function(L){Pe.call(this,e,L)})),O("change",Q,L=>v()(r(E).id,"x",L.currentTarget.valueAsNumber)),O("click",st,Ee(function(L){Pe.call(this,e,L)})),O("change",st,L=>v()(r(E).id,"y",L.currentTarget.valueAsNumber)),O("click",x,Ee(function(L){Pe.call(this,e,L)})),O("change",x,L=>v()(r(E).id,"width",L.currentTarget.valueAsNumber)),O("click",D,Ee(function(L){Pe.call(this,e,L)})),O("change",D,L=>v()(r(E).id,"height",L.currentTarget.valueAsNumber)),O("click",G,L=>f()(r(E).id,b()(L))),Ht(H,G)}),qt(()=>m.disabled=!s()),O("click",S,function(...H){u()?.apply(this,H)}),O("click",m,function(...H){h()?.apply(this,H)}),Ht(t,y),Le()}var us=Yt('<h2 class="svelte-6jpypa">Arrange</h2> <div class="buttons-grid svelte-6jpypa"><button type="button">Align Left</button> <button type="button">Align Right</button> <button type="button">Align Top</button> <button type="button">Align Bottom</button> <button type="button">Align Horizontal Center</button> <button type="button">Align Vertical Center</button> <button type="button">Center Horizontally</button> <button type="button">Center Vertically</button> <button type="button">Distribute Across Mat (Horizontal)</button> <button type="button">Distribute Across Mat (Vertical)</button></div>',1);function cs(t,e){He(e,!1);let n=I(e,"selectedCount",8),i=I(e,"alignSelected",8),s=I(e,"centerSelected",8),l=I(e,"distribute",8);Qe();var u=us(),h=z(zn(u),2),f=T(h),v=z(f,2),b=z(v,2),y=z(b,2),w=z(y,2),S=z(w,2),m=z(S,2),N=z(m,2),P=z(N,2),R=z(P,2);qt(()=>{f.disabled=n()<2,v.disabled=n()<2,b.disabled=n()<2,y.disabled=n()<2,w.disabled=n()<2,S.disabled=n()<2,m.disabled=!n(),N.disabled=!n(),P.disabled=n()<2,R.disabled=n()<2}),O("click",f,()=>i()("left")),O("click",v,()=>i()("right")),O("click",b,()=>i()("top")),O("click",y,()=>i()("bottom")),O("click",w,()=>i()("horizontal-center")),O("click",S,()=>i()("vertical-center")),O("click",m,()=>s()("horizontal")),O("click",N,()=>s()("vertical")),O("click",P,()=>l()("horizontal")),O("click",R,()=>l()("vertical")),Ht(t,u),Le()}var fs=Yt('<div role="button" tabindex="0"><span class="svelte-13gzjtw"> </span> <small class="svelte-13gzjtw"> </small></div> <div><span class="svelte-13gzjtw"> </span></div> <div><span class="svelte-13gzjtw"> </span></div>',1),ds=Yt('<div><span class="svelte-13gzjtw"> </span></div>'),hs=Yt('<div class="preview-wrapper svelte-13gzjtw"><h2>Preview</h2> <div class="mat-container svelte-13gzjtw"><div class="mat svelte-13gzjtw" role="button" tabindex="0" aria-label="Clear selection"><!> <div class="dimension horizontal mat-dimension svelte-13gzjtw"><span class="svelte-13gzjtw"> </span></div> <div class="dimension vertical mat-dimension svelte-13gzjtw"><span class="svelte-13gzjtw"> </span></div> <!></div></div> <button type="button" class="clear-selection svelte-13gzjtw">Clear Selection</button></div>');function vs(t,e){He(e,!1);let n=I(e,"containerWidth",12),i=I(e,"positionedWindows",8),s=I(e,"matDimensions",8),l=I(e,"extraDimensions",8),u=I(e,"unit",8),h=I(e,"scaledMatWidth",8),f=I(e,"scaledMatHeight",8),v=I(e,"matWidth",8),b=I(e,"matHeight",8),y=I(e,"selectedIdSet",8),w=I(e,"formatMeasurement",8),S=I(e,"clearSelection",8),m=I(e,"toggleSelection",8),N=I(e,"altKey",8),P=I(e,"handleKeyActivate",8),R=I(e,"selectedCount",8);Qe();var H=hs(),E=z(T(H),2),G=T(E),B=T(G);qe(B,1,i,V=>V.id,(V,x)=>{var A=fs(),D=zn(A);let L;var J=T(D),nt=T(J),it=z(J,2),$=T(it),mt=z(D,2);let lt;var xt=T(mt),ae=T(xt),Zt=z(mt,2);let Ut;var dt=T(Zt),se=T(dt);qt((Pt,ht,jt,le,Mt,Jt,oe,kt,Qt)=>{L=Ye(D,1,"preview-window svelte-13gzjtw",null,L,Pt),De(D,"aria-pressed",ht),De(D,"aria-label",jt),de(D,(r(x),X(()=>`left: ${r(x).scaledX}px; top: ${r(x).scaledY}px; width: ${r(x).scaledWidth}px; height: ${r(x).scaledHeight}px;`))),It(nt,(r(x),X(()=>r(x).name))),It($,`${le??""}x${Mt??""} ${u()??""}`),lt=Ye(mt,1,"dimension horizontal svelte-13gzjtw",null,lt,Jt),de(mt,(r(x),X(()=>`left: ${r(x).horizontal.left}px; top: ${r(x).horizontal.top}px; width: ${r(x).horizontal.length}px;`))),It(ae,oe),Ut=Ye(Zt,1,"dimension vertical svelte-13gzjtw",null,Ut,kt),de(Zt,(r(x),X(()=>`left: ${r(x).vertical.left}px; top: ${r(x).vertical.top}px; height: ${r(x).vertical.length}px;`))),It(se,Qt)},[()=>({selected:y().has(r(x).id)}),()=>(yt(y()),r(x),X(()=>y().has(r(x).id))),()=>(r(x),yt(u()),X(()=>`${r(x).name} (${Math.round(r(x).width)} by ${Math.round(r(x).height)} ${u()})`)),()=>(r(x),X(()=>Math.round(r(x).width))),()=>(r(x),X(()=>Math.round(r(x).height))),()=>({above:r(x).horizontal.position==="above",below:r(x).horizontal.position==="below"}),()=>(yt(w()),r(x),X(()=>w()(r(x).width))),()=>({left:r(x).vertical.position==="left",right:r(x).vertical.position==="right"}),()=>(yt(w()),r(x),X(()=>w()(r(x).height)))]),O("click",D,Pt=>{Pt.stopPropagation(),m()(r(x).id,N()(Pt))}),O("keydown",D,Pt=>P()(Pt,ht=>m()(r(x).id,N()(ht)))),Ht(V,A)});var k=z(B,2),W=T(k),j=T(W),q=z(k,2),ut=T(q),Q=T(ut),et=z(q,2);qe(et,1,l,V=>V.id,(V,x)=>{var A=ds(),D=T(A),L=T(D);qt(()=>{Ye(A,1,(r(x),X(()=>`dimension ${r(x).orientation} ${r(x).modifier}`)),"svelte-13gzjtw"),de(A,(r(x),X(()=>r(x).orientation==="horizontal"?`left: ${r(x).left}px; top: ${r(x).top}px; width: ${r(x).length}px;`:`left: ${r(x).left}px; top: ${r(x).top}px; height: ${r(x).length}px;`))),It(L,(r(x),X(()=>r(x).label)))}),Ht(V,A)});var st=z(E,2);qt((V,x)=>{de(G,`width: ${h()}px; height: ${f()}px;`),de(k,(yt(s()),X(()=>`left: ${s().horizontal.left}px; top: ${s().horizontal.top}px; width: ${s().horizontal.length}px;`))),It(j,V),de(q,(yt(s()),X(()=>`left: ${s().vertical.left}px; top: ${s().vertical.top}px; height: ${s().vertical.length}px;`))),It(Q,x),st.disabled=!R()},[()=>(yt(w()),yt(v()),X(()=>w()(v()))),()=>(yt(w()),yt(b()),X(()=>w()(b())))]),O("click",G,function(...V){S()?.apply(this,V)}),O("keydown",G,V=>P()(V,()=>S()())),Ja(E,"clientWidth",n),O("click",st,function(...V){S()?.apply(this,V)}),Ht(t,H),Le()}var _s=Yt('<section class="designer mat-designer svelte-1eszyxq"><!> <div class="layout svelte-1eszyxq"><div class="controls svelte-1eszyxq"><div class="control-group svelte-1eszyxq"><!></div> <div class="control-group svelte-1eszyxq"><!></div></div> <div class="preview-area svelte-1eszyxq"><!></div></div></section>');function ps(t,e){He(e,!1);const n=K(),i=K(),s=K(),l=K(),u=K(),h=K(),f=20,v=600,b=420,y=100,w=320,S=.2,m=16,N=18,P=12,R="mat-designer-state/v1",H="mat-designer-presets/v1",E="default-",G=["mm","cm","in"],B={mm:1,cm:10,in:25.4},k=1e3;let W=K(500),j=K(350),q=K("mm"),ut=K(f),Q=K(B[r(q)]),et=K(r(W)*r(Q)),st=K(r(j)*r(Q)),V=0;function x({name:a,x:o=40,y:d=40,width:c=140,height:_=120}={}){const g=++V;return{id:g,name:a??`Window ${g}`,x:o,y:d,width:c,height:_}}let A=K([x({name:"Main Window",x:140,y:100,width:180,height:200})]),D=K(r(A).map(a=>a.id)),L=K(new Set(r(D))),J=K([]),nt=K([]),it=K([]),$=K(null),mt=null,lt=K(""),xt=K(!1),ae=K(!1),Zt=K(!1),Ut=K(v),dt=K(1),se=K([]),Pt=K([]),ht=K([]),jt=!1,le=!1,Mt=K([]),Jt=K({horizontal:{left:0,top:0,length:0},vertical:{left:0,top:0,length:0}});const oe=a=>a.shiftKey||a.metaKey||a.ctrlKey;function kt(a,o,d=r(ut)){return Number.isFinite(a)?Math.max(a,d):o}function Qt(a){return a.map(o=>({...o}))}function we(a){return{matWidth:a.matWidth,matHeight:a.matHeight,unit:a.unit,windows:Qt(a.windows),selectedIds:[...a.selectedIds],idCounter:a.idCounter}}function $t(a){return{id:a.id,name:a.name,createdAt:a.createdAt,updatedAt:a.updatedAt,state:we(a.state)}}const Z=vt();function vt(){const a={matWidth:280,matHeight:356,unit:"mm",windows:[{id:1,name:"Portrait Opening",x:38.5,y:51,width:203,height:254}],selectedIds:[],idCounter:1},o={matWidth:457,matHeight:356,unit:"mm",windows:[{id:1,name:"Left Opening",x:70,y:89,width:127,height:178},{id:2,name:"Right Opening",x:260,y:89,width:127,height:178}],selectedIds:[],idCounter:2},d={matWidth:635,matHeight:305,unit:"mm",windows:[{id:1,name:"Panel A",x:52.5,y:47.5,width:150,height:210},{id:2,name:"Panel B",x:242.5,y:47.5,width:150,height:210},{id:3,name:"Panel C",x:432.5,y:47.5,width:150,height:210}],selectedIds:[],idCounter:3},c={matWidth:280,matHeight:356,unit:"mm",windows:[{id:1,name:"Artwork Opening",x:38.5,y:30,width:203,height:254},{id:2,name:"Title Window",x:60,y:304,width:160,height:40}],selectedIds:[],idCounter:2};return[{id:`${E}classic-portrait`,name:"Classic Portrait 8x10",state:a},{id:`${E}gallery-duo`,name:"Gallery Duo 5x7",state:o},{id:`${E}panoramic-triptych`,name:"Panoramic Triptych",state:d},{id:`${E}title-block`,name:"Museum Title Block",state:c}].map((g,M)=>({id:g.id,name:g.name,createdAt:M,updatedAt:M,state:we(g.state)}))}function rt(a){return!!(a&&a.startsWith(E))}function ue(a){const o=Z.map($t),d=a.filter(_=>!rt(_.id)).map($t),c=[...o,...d];return c.sort((_,g)=>{const M=rt(_.id),F=rt(g.id);return M&&!F?-1:!M&&F?1:_.name.localeCompare(g.name)}),c}const bt=(a,o=0,d=Number.POSITIVE_INFINITY)=>Math.min(Math.max(a,o),d);function Ln(a){return Math.round(a*k)/k}function xe(a,o,d){if(o===d)return a;const c=a*B[o];return Ln(c/B[d])}function on(a){return a==="mm"||a==="cm"||a==="in"}function ce(a){return`${Ln(a)} ${r(q)}`}function Br(){if(typeof window>"u"||!window.localStorage)return null;try{const a=window.localStorage.getItem(R);if(!a)return null;const o=JSON.parse(a);if(!o||typeof o!="object"||typeof o.matWidth!="number"||typeof o.matHeight!="number")return null;const d=typeof o.unit=="string"&&on(o.unit)?o.unit:r(q),c=xe(f,"mm",d),_=xe(r(W),r(q),d),g=xe(r(j),r(q),d),M=Array.isArray(o.windows)?o.windows.filter(Boolean).map(F=>{const C=F,_t=Number(C.width),Si=Number(C.height);return{id:Number(C.id)||0,name:typeof C.name=="string"?C.name:`Window ${Number(C.id)||0}`,x:Number(C.x)||0,y:Number(C.y)||0,width:kt(_t,c,c),height:kt(Si,c,c)}}):[];return{matWidth:kt(o.matWidth,_,c),matHeight:kt(o.matHeight,g,c),unit:d,windows:M,selectedIds:Array.isArray(o.selectedIds)?o.selectedIds.map(Number):[],idCounter:typeof o.idCounter=="number"?o.idCounter:0}}catch(a){return console.warn("Failed to load mat designer state",a),null}}function un(a){if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(R,JSON.stringify(a))}catch(o){console.warn("Failed to persist mat designer state",o)}}function qr(){if(typeof window>"u"||!window.localStorage)return[];try{const a=window.localStorage.getItem(H);if(!a)return[];const o=JSON.parse(a);return Array.isArray(o)?o.map(c=>{if(!c||typeof c!="object")return null;const _=c;if(typeof _.id!="string"||!_.id||typeof _.name!="string"||!_.name.trim()||typeof _.createdAt!="number"||typeof _.updatedAt!="number")return null;const g=_.state;if(!g||typeof g.matWidth!="number"||typeof g.matHeight!="number"||typeof g.unit!="string"||!on(g.unit)||!Array.isArray(g.windows))return null;const M=g.windows.filter(Boolean).map(F=>{const C=F;return{id:Number(C.id)||0,name:typeof C.name=="string"?C.name:`Window ${Number(C.id)||0}`,x:Number(C.x)||0,y:Number(C.y)||0,width:Number(C.width)||f,height:Number(C.height)||f}});return{id:_.id,name:_.name.trim(),createdAt:_.createdAt,updatedAt:_.updatedAt,state:{matWidth:g.matWidth,matHeight:g.matHeight,unit:g.unit,windows:M,selectedIds:Array.isArray(g.selectedIds)?g.selectedIds.map(Number).filter(F=>Number.isFinite(F)):[],idCounter:typeof g.idCounter=="number"?g.idCounter:0}}}).filter(c=>!!c).filter(c=>!rt(c.id)).map(c=>$t(c)):[]}catch(a){return console.warn("Failed to load mat designer presets",a),[]}}function Fn(a){if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(H,JSON.stringify(a))}catch(o){console.warn("Failed to persist mat designer presets",o)}}function Kr(a){const d=a.currentTarget.value;if(p($,d||null),!r($)){p(lt,"");return}const c=r(it).find(_=>_.id===r($));p(lt,c?c.name:"")}function Vr(){if(!r($))return;const a=r(it).find(o=>o.id===r($));a&&(le=!0,cn({matWidth:a.state.matWidth,matHeight:a.state.matHeight,unit:a.state.unit,windows:Qt(a.state.windows),selectedIds:[...a.state.selectedIds],idCounter:a.state.idCounter}),p(A,r(A).map(o=>Ot(o))),p(J,[]),p(nt,[]),le=!1,mt=a.id,p(lt,a.name),jt&&un(fe()))}function Gr(){if(!r($)||rt(r($)))return;const a=r(it).filter(c=>!rt(c.id)).map($t),o=a.filter(c=>c.id!==r($));if(o.length===a.length)return;Fn(o),p(it,ue(o)),mt===r($)&&(mt=null);const d=r(it).find(c=>!rt(c.id))??r(it)[0]??null;p($,d?d.id:null),p(lt,d?d.name:"")}function Zr(){const a=r(lt).trim();if(!a)return;const o=Date.now(),d=fe(),c=r(it).filter(C=>!rt(C.id)).map($t),_=r($)?c.findIndex(C=>C.id===r($)):-1,g=c.findIndex(C=>C.name.toLowerCase()===a.toLowerCase());let M;if(_>=0){const C=c[_];c[_]={...C,name:a,updatedAt:o,state:d},M=c[_].id}else if(g>=0){const C=c[g];c[g]={...C,name:a,updatedAt:o,state:d},M=c[g].id}else{const C={id:`preset-${o}`,name:a,createdAt:o,updatedAt:o,state:d};c.push(C),M=C.id}Fn(c),p(it,ue(c));const F=r(it).find(C=>C.id===M)??r(it)[0]??null;p($,F?F.id:null),p(lt,F?F.name:""),mt=F?F.id:null}function Jr(a){const o=a.currentTarget;p(lt,o.value)}const Yn=4,Qr=a=>bt(a.scaledY+a.scaledHeight/2,P,Math.max(r(s)-P,0)),$r=a=>bt(a.scaledX+a.scaledWidth/2,P,Math.max(r(i)-P,0));function ti(a,o){const d=Math.max(a.scaledY,o.scaledY);return Math.min(a.scaledY+a.scaledHeight,o.scaledY+o.scaledHeight)-d}function ei(a,o){const d=Math.max(a.scaledX,o.scaledX);return Math.min(a.scaledX+a.scaledWidth,o.scaledX+o.scaledWidth)-d}function fe(){return{matWidth:r(W),matHeight:r(j),unit:r(q),windows:Qt(r(A)),selectedIds:[...r(D)],idCounter:V}}function cn(a){p(W,a.matWidth),p(j,a.matHeight),p(q,a.unit),p(A,Qt(a.windows)),p(D,[...a.selectedIds]),V=a.idCounter??Math.max(0,...r(A).map(o=>o.id))}function ni(a,o){if(a.length!==o.length)return!1;for(let d=0;d<a.length;d+=1)if(a[d]!==o[d])return!1;return!0}function ri(a,o){if(a.length!==o.length)return!1;for(let d=0;d<a.length;d+=1){const c=a[d],_=o[d];if(c.id!==_.id||c.name!==_.name||c.x!==_.x||c.y!==_.y||c.width!==_.width||c.height!==_.height)return!1}return!0}function ii(a,o){return a.matWidth===o.matWidth&&a.matHeight===o.matHeight&&a.unit===o.unit&&a.idCounter===o.idCounter&&ri(a.windows,o.windows)&&ni(a.selectedIds,o.selectedIds)}function Tt(a){const o=fe();a();const d=fe();ii(o,d)||(p(J,[...r(J),o]),r(J).length>y&&p(J,r(J).slice(-y)),p(nt,[]),jt&&un(d),le||(mt=null))}function Ot(a,o={}){const d=o.matWidth??r(W),c=o.matHeight??r(j),_=o.minSize??r(ut),g=Math.min(Math.max(a.width,_),d),M=Math.min(Math.max(a.height,_),c),F=Math.min(Math.max(a.x,0),Math.max(d-g,0)),C=Math.min(Math.max(a.y,0),Math.max(c-M,0));return{...a,width:g,height:M,x:F,y:C}}function ai(){const a=30*(r(A).length%5);Tt(()=>{const o=Ot(x({x:60+a,y:60+a,width:140,height:160}));p(A,[...r(A),o]),p(D,[o.id])})}function si(){const a=new Set(r(D));a.size&&Tt(()=>{p(A,r(A).filter(o=>!a.has(o.id))),r(A).length?p(D,[r(A)[r(A).length-1].id]):p(D,[])})}function li(a,o,d){Tt(()=>{p(A,r(A).map(c=>{if(c.id!==a)return c;const _={...c};if(o==="name")_.name=String(d).trim()||c.name;else{const g=Number(d);if(Number.isNaN(g))return c;o==="x"&&(_.x=g),o==="y"&&(_.y=g),o==="width"&&(_.width=g),o==="height"&&(_.height=g)}return Ot(_)}))})}function Un(a,o=!1){const d=[...r(D)];Tt(()=>{if(!o){p(D,[a]);return}const c=d.includes(a);p(D,c?d.filter(_=>_!==a):[...d,a])})}function oi(){Tt(()=>{p(D,[])})}function ui(a){if(r(D).length<2)return;const o=r(D)[r(D).length-1],d=r(A).find(g=>g.id===o);if(!d)return;const c=new Set(r(D));let _=0;a==="left"&&(_=d.x),a==="right"&&(_=d.x+d.width),a==="top"&&(_=d.y),a==="bottom"&&(_=d.y+d.height),a==="horizontal-center"&&(_=d.x+d.width/2),a==="vertical-center"&&(_=d.y+d.height/2),Tt(()=>{p(A,r(A).map(g=>{if(!c.has(g.id))return g;const M={...g};return a==="left"&&(M.x=_),a==="right"&&(M.x=_-M.width),a==="top"&&(M.y=_),a==="bottom"&&(M.y=_-M.height),a==="horizontal-center"&&(M.x=_-M.width/2),a==="vertical-center"&&(M.y=_-M.height/2),Ot(M)}))})}function ci(a){const o=new Set(r(D));o.size&&Tt(()=>{p(A,r(A).map(d=>{if(!o.has(d.id))return d;const c={...d};return a==="horizontal"&&(c.x=(r(W)-d.width)/2),a==="vertical"&&(c.y=(r(j)-d.height)/2),Ot(c)}))})}function fi(a){const o=new Set(r(D)),d=r(A).filter(M=>o.has(M.id)).sort((M,F)=>a==="horizontal"?M.x-F.x:M.y-F.y);if(d.length<2)return;const c=r(a==="horizontal"?W:j),_=d.reduce((M,F)=>M+(a==="horizontal"?F.width:F.height),0),g=Math.max((c-_)/(d.length+1),0);Tt(()=>{let M=g;const F=new Map;d.forEach(C=>{const _t={...C};a==="horizontal"?(_t.x=M,M+=C.width+g):(_t.y=M,M+=C.height+g),F.set(C.id,Ot(_t))}),p(A,r(A).map(C=>F.get(C.id)??C))})}function di(a){const o=a.currentTarget,d=kt(o.valueAsNumber,r(W));Tt(()=>{p(W,d),p(A,r(A).map(c=>Ot(c)))})}function hi(a){const o=a.currentTarget,d=kt(o.valueAsNumber,r(j));Tt(()=>{p(j,d),p(A,r(A).map(c=>Ot(c)))})}function vi(a){const d=a.currentTarget.value;on(d)&&d!==r(q)&&Tt(()=>{const c=r(q),_=xe(f,"mm",d),g=_t=>xe(_t,c,d),M=g(r(W)),F=g(r(j)),C=r(A).map(_t=>({..._t,x:g(_t.x),y:g(_t.y),width:g(_t.width),height:g(_t.height)}));p(q,d),p(W,M),p(j,F),p(A,C.map(_t=>Ot(_t,{matWidth:M,matHeight:F,minSize:_})))})}function _i(a,o){const d=a.key;(d==="Enter"||d===" ")&&(a.preventDefault(),a.stopPropagation(),o(a))}function pi(){typeof window>"u"||window.print()}function jn(){if(!r(J).length)return;const a=r(J)[r(J).length-1];p(J,r(J).slice(0,-1));const o=fe();p(nt,[...r(nt),o]),r(nt).length>y&&p(nt,r(nt).slice(-y)),cn(a)}function Xn(){if(!r(nt).length)return;const a=r(nt)[r(nt).length-1];p(nt,r(nt).slice(0,-1));const o=fe();p(J,[...r(J),o]),r(J).length>y&&p(J,r(J).slice(-y)),cn(a)}$a(()=>{if(typeof window<"u"){const o=Br();if(o){p(W,o.matWidth),p(j,o.matHeight),p(q,o.unit),p(A,o.windows.map(g=>Ot({...g})));const _=new Set(r(A).map(g=>g.id));p(D,o.selectedIds.filter(g=>_.has(g))),!r(D).length&&r(A).length&&p(D,[r(A)[0].id]),V=Math.max(o.idCounter??0,...r(A).map(g=>g.id)),p(J,[]),p(nt,[])}jt=!0,un(fe());const d=qr();p(it,ue(d));const c=r(it)[0]??null;p($,c?c.id:null),p(lt,c?c.name:"")}const a=o=>{if(!(o.ctrlKey||o.metaKey))return;const d=o.key.toLowerCase();if(d==="z"&&!o.shiftKey){o.preventDefault(),jn();return}(d==="y"||d==="z"&&o.shiftKey)&&(o.preventDefault(),Xn())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)}),at(()=>r(q),()=>{p(ut,xe(f,"mm",r(q)))}),at(()=>r(q),()=>{p(Q,B[r(q)])}),at(()=>(r(W),r(Q)),()=>{p(et,r(W)*r(Q))}),at(()=>(r(j),r(Q)),()=>{p(st,r(j)*r(Q))}),at(()=>r(Ut),()=>{p(n,Math.max(w,r(Ut)-m))}),at(()=>(r(et),r(st),r(n)),()=>{p(dt,(()=>{const a=Math.max(r(et),f),o=Math.max(r(st),f),d=Math.min(v/a,b/o,r(n)/a,2);return Math.max(d,S)})())}),at(()=>(r(et),r(dt)),()=>{p(i,r(et)*r(dt))}),at(()=>(r(st),r(dt)),()=>{p(s,r(st)*r(dt))}),at(()=>(r(A),r(Q),r(dt),r(s),r(i)),()=>{p(Mt,r(A).map(a=>{const o=a.width*r(Q)*r(dt),d=a.height*r(Q)*r(dt),c=a.x*r(Q)*r(dt),_=a.y*r(Q)*r(dt),g=_>N*2,M=bt(g?_-N:_+d+P,0,Math.max(r(s)-P,0)),F=c>N*2,C=bt(F?c-N:c+o+P,0,Math.max(r(i)-P,0));return{...a,scaledX:c,scaledY:_,scaledWidth:o,scaledHeight:d,horizontal:{left:c,top:M,length:Math.max(o,0),position:g?"above":"below"},vertical:{top:_,left:C,length:Math.max(d,0),position:F?"left":"right"}}}))}),at(()=>(r(s),r(i)),()=>{p(Jt,{horizontal:{left:0,top:bt(r(s)-(N+P),0,Math.max(r(s)-P,0)),length:r(i)},vertical:{top:0,left:bt(r(i)-(N+P),0,Math.max(r(i)-P,0)),length:r(s)}})}),at(()=>(r(Mt),r(W),r(i),r(j),r(s)),()=>{p(Pt,r(Mt).flatMap(a=>{const o=[],d=Qr(a),c=$r(a);a.scaledX>1&&o.push({id:`margin-left-${a.id}`,orientation:"horizontal",left:0,top:d,length:a.scaledX,label:ce(a.x),modifier:"margin"});const _=r(W)-(a.x+a.width),g=r(i)-(a.scaledX+a.scaledWidth);g>1&&o.push({id:`margin-right-${a.id}`,orientation:"horizontal",left:a.scaledX+a.scaledWidth,top:d,length:g,label:ce(_),modifier:"margin"}),a.scaledY>1&&o.push({id:`margin-top-${a.id}`,orientation:"vertical",left:c,top:0,length:a.scaledY,label:ce(a.y),modifier:"margin"});const M=r(j)-(a.y+a.height),F=r(s)-(a.scaledY+a.scaledHeight);return F>1&&o.push({id:`margin-bottom-${a.id}`,orientation:"vertical",left:c,top:a.scaledY+a.scaledHeight,length:F,label:ce(M),modifier:"margin"}),o.filter(C=>C.length>1)}))}),at(()=>(r(Mt),r(s),r(i)),()=>{p(ht,(()=>{const a=[],o=[...r(Mt)].sort((c,_)=>c.scaledX-_.scaledX);o.forEach(c=>{const _=o.filter(g=>g.scaledX>c.scaledX&&ti(c,g)>Yn).sort((g,M)=>g.scaledX-M.scaledX)[0];if(_){const g=_.scaledX-(c.scaledX+c.scaledWidth);if(g>1){const M=Math.max(c.scaledY,_.scaledY),F=Math.min(c.scaledY+c.scaledHeight,_.scaledY+_.scaledHeight),C=bt(M+(F-M)/2,P,Math.max(r(s)-P,0));a.push({id:`spacing-h-${c.id}-${_.id}`,orientation:"horizontal",left:c.scaledX+c.scaledWidth,top:C,length:g,label:ce(_.x-(c.x+c.width)),modifier:"spacing"})}}});const d=[...r(Mt)].sort((c,_)=>c.scaledY-_.scaledY);return d.forEach(c=>{const _=d.filter(g=>g.scaledY>c.scaledY&&ei(c,g)>Yn).sort((g,M)=>g.scaledY-M.scaledY)[0];if(_){const g=_.scaledY-(c.scaledY+c.scaledHeight);if(g>1){const M=Math.max(c.scaledX,_.scaledX),F=Math.min(c.scaledX+c.scaledWidth,_.scaledX+_.scaledWidth),C=bt(M+(F-M)/2,P,Math.max(r(i)-P,0));a.push({id:`spacing-v-${c.id}-${_.id}`,orientation:"vertical",left:C,top:c.scaledY+c.scaledHeight,length:g,label:ce(_.y-(c.y+c.height)),modifier:"spacing"})}}}),a})())}),at(()=>(r(Pt),r(ht)),()=>{p(se,[...r(Pt),...r(ht)])}),at(()=>r(D),()=>{p(L,new Set(r(D)))}),at(()=>r(D),()=>{p(l,r(D).length)}),at(()=>r(J),()=>{p(u,r(J).length>0)}),at(()=>r(nt),()=>{p(h,r(nt).length>0)}),at(()=>(r($),r(it)),()=>{p(xt,!!(r($)&&r(it).some(a=>a.id===r($))))}),at(()=>(r(xt),r($)),()=>{p(ae,!!(r(xt)&&r($)&&!rt(r($))))}),at(()=>r(lt),()=>{p(Zt,!!r(lt).trim())}),Ma(),Qe();var Bn=_s(),qn=T(Bn);as(qn,{get matWidth(){return r(W)},get matHeight(){return r(j)},get unit(){return r(q)},get unitOptions(){return G},get previewScale(){return r(dt)},get minSize(){return r(ut)},get canUndo(){return r(u)},get canRedo(){return r(h)},onMatWidthChange:di,onMatHeightChange:hi,onUnitChange:vi,onUndo:jn,onRedo:Xn,onPrint:pi,get presets(){return r(it)},get selectedPresetId(){return r($)},get newPresetName(){return r(lt)},get canLoadPreset(){return r(xt)},get canDeletePreset(){return r(ae)},get canSavePreset(){return r(Zt)},onPresetSelect:Kr,onPresetLoad:Vr,onPresetDelete:Gr,onPresetNameInput:Jr,onPresetSave:Zr});var gi=z(qn,2),Kn=T(gi),Vn=T(Kn),mi=T(Vn);os(mi,{get windows(){return r(A)},get selectedIdSet(){return r(L)},get selectedCount(){return r(l)},get minSize(){return r(ut)},addWindow:ai,removeSelected:si,toggleSelection:Un,updateWindow:li,altKey:oe});var bi=z(Vn,2),yi=T(bi);cs(yi,{get selectedCount(){return r(l)},alignSelected:ui,centerSelected:ci,distribute:fi});var wi=z(Kn,2),xi=T(wi);vs(xi,{get positionedWindows(){return r(Mt)},get matDimensions(){return r(Jt)},get extraDimensions(){return r(se)},get unit(){return r(q)},get scaledMatWidth(){return r(i)},get scaledMatHeight(){return r(s)},get selectedIdSet(){return r(L)},formatMeasurement:ce,get matWidth(){return r(W)},get matHeight(){return r(j)},clearSelection:oi,toggleSelection:Un,altKey:oe,handleKeyActivate:_i,get selectedCount(){return r(l)},get containerWidth(){return r(Ut)},set containerWidth(a){p(Ut,a)},$$legacy:!0}),Ht(t,Bn),Le()}function gs(t){ps(t,{})}La(gs,{target:document.getElementById("app")});
